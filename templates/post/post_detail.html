{% extends "base.html" %}
{%load crispy_forms_tags%}
{% block content %}

<style>
  .thumbnail {
    padding: .25rem;
    background-color: #fff;
    /* border: 1px solid #dee2e6; */
    border-radius: .75rem;
    max-width: 100%;
    height: auto;
  }

  .page-item {
    margin: 5px;
  }

  .card-img {
    border-bottom-left-radius: 0px;
    border-bottom-right-radius: 0px;
  }

  .card-title {
    margin-bottom: 0.3rem;
  }

  .cat {
    display: inline-block;
    margin-bottom: 1rem;
  }

  .fa-users {
    margin-left: 1rem;
  }

  .card-footer {
    font-size: 0.8rem;
  }

  .card-img-top {
    max-height: 35vh;
    /*not want to take all vertical space*/
    object-fit: cover;
    /*show all image, autosized, no cut, in available space*/
  }

</style>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>

<div class="  col-lg-7 offset-lg-4 div-wrapper justify-content-center " style="margin-top: 35px; margin-bottom: 35px;">
  <div class="col-lg-7">
    <div class="card" style="padding: 15px">
      <div class="">
        <h1 class="">{{ object.title }}</h1>
        <a href="{% url 'user-info' post.id %}">{{object.author}}</a>
        <small class="text-muted">{{ object.date_posted|date:"F d, Y" }}</small>
        <small class="text-muted">.{{ object.category.title }}</small>
        <!--
          <div class="container my-4">
  <div class="d-flex justify-content-center">
    <div class="col-4 ">
      <div class="card">
        fhybdj
        -->
      </div>
    </div>
    <div class="col-8">
      <div class="mx-auto">
        <div class="card">
          <img class="card-img card-img-top img-fluid" src="{{ post.image.url }}" alt="Bologna">
          <div class="card-body">
            <h1 class="card-title my-2">{{post.title}}</h1>
            <div class="d-flex justify-content-start my-2">
              <div class="me-5">
                <i class="bx bxs-user"></i><a href="{% url 'user-info' post.id %}">{{object.author}}</a>
              </div>
              <div class="me-5">
                <i class="bx bx-time"></i>{{ object.date_posted|date:"F d, Y" }}
              </div>
              <div class="modal-footer">
                <div class="clearfix">
                  <a type="button" class="btn btn-secondary btn-sm mt-1 mb-1" data-bs-dismiss="modal">Close</a>
                  <a class="btn btn-danger btn-sm mt-1 mb-1" href="{% url 'post-delete' object.id %}">Delete</a>

        {% if starred %}
          <a href="{% url 'postStar' post.id %}">Unstar<i class="fas fa-star"></i></a>
        {% else %}
          <a href="{% url 'postStar' post.id %}">Star<i class="far fa-star"></i></a>
        {% endif %}
        </div>
        {% if object.author == user %}
        <div>
          <a class="btn btn-primary btn-sm mt-1 mb-1" href="{% url 'post-update' object.id %}">Update</a>
          <!-- <a class="btn btn-danger btn-sm mt-1 mb-1" href="{% url 'post-delete' object.id %}">Delete</a> -->
          <!-- <a class="btn btn-danger btn-sm mt-1 mb-1" data-bs-toggle="modal" data-bs-target="#delete">Delete</a> -->
          <a type="button" class="btn btn-danger btn-sm mt-1 mb-1" data-bs-toggle="modal" data-bs-target="#deletePost">
            Delete
          </a>

          <!-- Modal -->
          <div class="modal fade" id="deletePost" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Delete SubPost</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  Are you sure you want to delete the post "{{object.title}}"?
                </div>
                <div class="modal-footer">
                  <div class="clearfix">
                    <a type="button" class="btn btn-secondary btn-sm mt-1 mb-1" data-bs-dismiss="modal">Close</a>
                    <a class="btn btn-danger btn-sm mt-1 mb-1" href="{% url 'post-delete' object.id %}">Delete</a>
                  </div>

                </div>
              </div>
            </div>
            <p class="card-text">{{object.content | safe}}</p>
          </div>
        </div>
        {% include 'includes/subpages/subposts.html' %}
      </div>
    </div>
  </div>
  {% include 'includes/subpages/comments.html' %}
</div>











<!-- <script>
  // sandbox disable popups
  if (window.self !== window.top && window.name != "view1") {
    ;
    window.alert = function () {/*disable alert*/ };
    window.confirm = function () {/*disable confirm*/ };
    window.prompt = function () {/*disable prompt*/ };
    window.open = function () {/*disable open*/ };
  }

  // prevent href=# click jump
  document.addEventListener("DOMContentLoaded", function () {
    var links = document.getElementsByTagName("A");
    for (var i = 0; i < links.length; i++) {
      if (links[i].href.indexOf('#') != -1) {
        links[i].addEventListener("click", function (e) {
          console.debug("prevent href=# click");
          if (this.hash) {
            if (this.hash == "#") {
              e.preventDefault();
              return false;
            }
            else {
              /*
              var el = document.getElementById(this.hash.replace(/#/, ""));
              if (el) {
                el.scrollIntoView(true);
              }
              */
            }
          }
          return false;
        })
      }
    }
  }, false);
</script> -->
{% endblock content %}