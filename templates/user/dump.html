<div class="row">
    <div class="col-8">
        <h1 class="">{{ object.title }}</h1>
        <a href="{% url 'user-info' post.id %}">{{object.author}}</a>
        <small class="text-muted">{{ object.date_posted|date:"F d, Y" }}</small>
        <small class="text-muted">.{{ object.category.title }}</small>

    </div>
    {% if object.author == user %}
    <div>
        <a class="btn btn-primary btn-sm mt-1 mb-1" href="{% url 'post-update' object.id %}">Update</a>
        <a type="button" class="btn btn-danger btn-sm mt-1 mb-1" data-bs-toggle="modal" data-bs-target="#deletePost">
            Delete
        </a>

        <!-- Modal -->
        <div class="modal fade" id="deletePost" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Delete SubPost</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        Are you sure you want to delete the post "{{object.title}}"?
                    </div>
                    <div class="modal-footer">
                        <div class="clearfix">
                            <a type="button" class="btn btn-secondary btn-sm mt-1 mb-1" data-bs-dismiss="modal">Close</a>
                            <a class="btn btn-danger btn-sm mt-1 mb-1" href="{% url 'post-delete' object.id %}">Delete</a>

                            {% if object.stars_count == 0 %}
                            <a href="{% url 'postStar' post.id %}">Star<i class="far fa-star"></i></a>
                            {% else %}
                            <a href="{% url 'postStar' post.id %}">Unstar<i class="fa fas fa-star"></i></a>
                            {% endif %}
                        </div>
                        {% if object.author == user %}
                        <div>
                            <a class="btn btn-primary btn-sm mt-1 mb-1" href="{% url 'post-update' object.id %}">Update</a>
                            <!-- <a class="btn btn-danger btn-sm mt-1 mb-1" href="{% url 'post-delete' object.id %}">Delete</a> -->
                            <!-- <a class="btn btn-danger btn-sm mt-1 mb-1" data-bs-toggle="modal" data-bs-target="#delete">Delete</a> -->
                            <a type="button" class="btn btn-danger btn-sm mt-1 mb-1" data-bs-toggle="modal" data-bs-target="#deletePost">
                                Delete
                            </a>

                            <!-- Modal -->
                            <div class="modal fade" id="deletePost" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLabel">Delete SubPost</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            Are you sure you want to delete the post "{{object.title}}"?
                                        </div>
                                        <div class="modal-footer">
                                            <div class="clearfix">
                                                <a type="button" class="btn btn-secondary btn-sm mt-1 mb-1" data-bs-dismiss="modal">Close</a>
                                                <a class="btn btn-danger btn-sm mt-1 mb-1" href="{% url 'post-delete' object.id %}">Delete</a>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {% endif %}

                    <br>



                    <div class="">
                        {{object.content | safe}}

                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-12">
                    {%if not post.subposts.all%}
                    No SubPosts Yet.
                    {% if post.author == request.user %}
                    <div>
                        <a class="btn btn-secondary btn-sm mt-1 mb-1" href="{%url 'subpost-create' post.pk%}">Create SubPost</a>
                    </div>
                    {% endif %}
                    {%else%}
                    {%for subpost in post.subposts.all%}
                    <ol>
                        <li>
                            <div class="card card-html">
                                <div class="card-header">
                                    <i class="fab fa-html5"></i>{{subpost.title}}
                                </div>
                                <div class="card-body">
                                    {{subpost.description|safe}}
                                </div>
                                <div class="card-footer">
                                    <div class="clearfix">
                                        <div class="float-left">
                                            <!-- <div class="progress">
                                    <div class="progress-bar progress-bar-striped bg-success" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                                </div> -->
                                        </div>
                                        <div class="float-right">
                                            <button class="btn btn-success">Bot√£o de Acesso</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ol>
                    <div class="card">
                        <div class="card-body">
                            <h3 class="card-title">{{subpost.title}} </h4>
                                <p class="card-text">{{subpost.description|safe}} </p>
                                <p class="card-text">{{subpost.resources}} </p>
                                {% if post.author == request.user %}
                                <a class="btn btn-primary btn-sm mt-1 mb-1" href="subpost/{{ subpost.pk }}/update/" class="card-link">Update</a>
                                <a type="button" class="btn btn-danger btn-sm mt-1 mb-1" data-bs-toggle="modal" data-bs-target="#deleteSubPost">Delete</a>

                                <!-- Modal -->
                                <div class="modal fade" id="deleteSubPost" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="exampleModalLabel">Delete SubPost</h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body text-start">
                                                Are you sure you want to delete the post "{{subpost.title}}"?
                                            </div>
                                            <div class="modal-footer">
                                                <div class="clearfix">
                                                    <a type="button" class="btn btn-secondary btn-sm mt-1 mb-1" data-bs-dismiss="modal">Close</a>
                                                    <a class="btn btn-danger btn-sm mt-1 mb-1" href="subpost/{{ subpost.pk }}/delete/">Delete</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% endif %}
                        </div>
                    </div>
                    {% endfor %}
                    <div class="justify-content-between" style="margin-top: 5px;">
                        {% if post.author == request.user %}
                        <a class="btn btn-success btn-sm mt-1 mb-1 justify-content-between" href="{%url 'subpost-create' post.pk%}">Add more SubPosts</a>
                        {% endif %}
                    </div>

                </div>
                {%endif%}
            </div>
        </div>
    </div>
</div>
<!--COMMENT SECTION-->
<div class="container">
    <h2> Comments ({{comments.count}})</h2>
    <div class="my-2">
        {% if user.is_authenticated %}
        <form action="" method="POST">
            {% csrf_token %}
            <div class="form-group">
                <label for="exampleInputEmail1">Post Comment </label>
                <input type="text" class="form-control" name="body" placeholder="Enter comment here">
            </div>
            <input type="hidden" name="postSno" value="{{post.sno}}">
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
        {% else %}
        Please login to post a comment
        {% endif %}
    </div>
    {% endif %}
    {% for comment in comments %}
    <img style="width:50px; height:50px;" src="/media/default.jpg" alt="user">
    <b> {{comment.user.username}} </b> at {{comment.timestamp}}
    <div> {{comment.body}} </div>
    {% endfor %}
</div>















<div class="  col-lg-7 offset-lg-4 div-wrapper justify-content-center " style="margin-top: 35px; margin-bottom: 35px;">
    <div class="col-lg-7">
        <div class="card" style="padding: 15px">
            <div class="">



            </div>
        </div>
    </div>
</div>













<div class="card">
      <div class="container-fluid">
        <div class="row example-basic">
          <div class="col-md-12 example-title">
            <h1>{{ object.title }}</h1>
            <p><i class="bx bxs-user"></i><a href="{% url 'user-info' post.id %}">{{object.author}}</a>
            </p>
          </div>
          <div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2">
            <ul class="timeline">
              <li class="timeline-item">
                <div class="timeline-info">
                  <span>{{ object.date_posted|date:"F d, Y" }}</span>
                </div>
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                  <h3 class="timeline-title">Event Title</h3>
                  <p>Nullam vel sem. Nullam vel sem. Integer ante arcu, accumsan a, consectetuer eget, posuere ut, mauris. Donec orci lectus, aliquam ut, faucibus non, euismod id, nulla. Donec vitae sapien ut libero venenatis faucibus. ullam dictum felis
                    eu pede mollis pretium. Pellentesque ut neque.</p>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>









    <!-- commments code -->

    <div class="card mx-auto mt-2">
        <div class="container">
            <div class="text-center mt-2">
                <h2>Comments ({{comments.count}})</h2>
            </div>
            <hr>
            <div class="row">
                {% if user.is_authenticated %}
                <form action="" method="POST">
                    {% csrf_token %}
                    <label for="exampleInputEmail1">Post Comment: </label>
                    <div class="form-group my-2 d-flex justify-content-start">
                        <input type="text" class="form-control" name="body" placeholder="Type your comment here.">
                        <input type="hidden" name="postSno" value="{{post.sno}}">
                        <div class="mx-2">
                            <button type="submit" class="btn btn-primary">Submit</button>
                        </div>
                    </div>
                </form>
                {% else %}
                <h2>
                    Please login to post a comment.
                </h2>
                {% endif %}
                {% for comment in comments %}
                <div class="text-box d-flex justify-content-start mt-2">
                    <div class="icon-box px-2"><img style="width:60px; height:60px;" src="/media/default.jpg" alt="user"></div>
                    <div>
                        <h4 class="m-b-0"><strong>{{comment.user.username}}</strong></h5>
                            <p>{{comment.body}}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>





    <!-- subpost part -->
    <div class="ps-3">
        {%if not post.subposts.all%}
        <div class="">
            <h4>
                No SubPosts Yet.
            </h4>
        </div>
        {% if post.author == request.user %}
        <!-- <div class="ps-3"> -->
        <div>
            <a class="btn btn-secondary btn-sm mt-1 mb-1" href="{%url 'subpost-create' post.pk%}">Create SubPost</a>
        </div>
        {% endif %}
        {% else %}
        {%for subpost in post.subposts.all%}
        <div class="card card-html">
            <div class="card-header">
                <i class="fab fa-html5 me-2"></i>{{subpost.title}}
            </div>
            <div class="card-body">
                {{subpost.description|safe}}
            </div>
            <div class="card-body">
                <div class="d-flex justify-content-start">
                    <div class="me-2">
                        <h6><strong>Resource:</strong></h6><a href="https://{{subpost.resources}}">{{subpost.resources}}</a>
                    </div>
                </div>
            </div>
            <div class="card-body">
                {% if post.author == request.user %}
                <a class="btn btn-primary btn-sm mt-1 mb-1" href="subpost/{{ subpost.pk }}/update/" class="card-link">Update</a>
                <a type="button" class="btn btn-danger btn-sm mt-1 mb-1" data-bs-toggle="modal" data-bs-target="#deleteSubPost">Delete</a>
                <!-- Modal -->
                <div class="modal fade" id="deleteSubPost" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Delete SubPost</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body text-start">
                                Are you sure you want to delete the subpost "{{subpost.title}}"?
                            </div>
                            <div class="modal-footer">
                                <div class="clearfix">
                                    <a type="button" class="btn btn-secondary btn-sm mt-1 mb-1" data-bs-dismiss="modal">Close</a>
                                    <a class="btn btn-danger btn-sm mt-1 mb-1" href="subpost/{{ subpost.pk }}/delete/">Delete</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
        {% endfor %}
        <div class="justify-content-between" style="margin-top: 5px;">
            {% if post.author == request.user %}
            <a class="btn btn-success btn-sm mt-1 mb-1 justify-content-between" href="{%url 'subpost-create' post.pk%}">Add more SubPosts</a>
            {% endif %}
        </div>
    </div>
    {%endif%}
